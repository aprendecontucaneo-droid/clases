<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Clase Tucaneo: Plantilla Maestra Interactiva</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Playfair+Display:wght@400;700&family=Handlee&family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- ESTILOS BASE --- */
        :root { --primary: #10b981; --accent: #f59e0b; --text-main: #1f2937; --bg-light: #f8fafc; --danger: #ef4444; --info: #3b82f6; }
        body { background-color: var(--bg-light); font-family: 'Lato', sans-serif; }
        
        /* Drawer y Pizarra */
        #tucaneo-drawer { position: fixed; top: 0; right: -50vw; width: 50vw; height: 100vh; background: #fff; z-index: 20000; box-shadow: -10px 0 50px rgba(0,0,0,0.2); transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1); border-left: 1px solid #e5e7eb; display: flex; flex-direction: column; }
        #tucaneo-drawer.is-open { right: 0; }
        #safe-close-btn { position: absolute; top: 20px; right: 20px; z-index: 20001; background: #ef4444; color: white; width: 32px; height: 32px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
        #safe-close-btn:hover { transform: scale(1.1); }
        #fixed-logo { position: fixed; top: 30px; left: 30px; width: 140px; z-index: 5000; transition: all 0.3s ease; }
        
        /* Navegación Superior */
        #top-nav { position: fixed; top: 30px; right: 30px; z-index: 5000; display: flex; gap: 12px; transition: all 0.3s ease; }
        #floating-cta { position: fixed; bottom: 20px; left: 30px; z-index: 5000; font-size: 12px; color: #9ca3af; text-decoration: none; letter-spacing: 1px; }
        
        /* Reveal JS */
        .reveal { color: var(--text-main); font-size: 24px; }
        .reveal h1, .reveal h2, .reveal h3 { font-family: 'Playfair Display', serif; color: var(--primary); text-transform: none; font-weight: 700; }
        .reveal section { display: flex !important; flex-direction: column; justify-content: flex-start; height: 100%; padding-top: 80px !important; padding-bottom: 40px !important; }

        /* Estilos Generales */
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.5); border-radius: 16px; padding: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); margin-bottom: 30px; text-align: left; }
        .clean-input { border: none; border-bottom: 2px solid #cbd5e1; background: rgba(255, 255, 255, 0.6); font-family: 'Handlee', cursive; font-size: 1.1em; color: var(--accent); text-align: left; width: 100%; transition: 0.3s; padding: 10px; border-radius: 4px; cursor: text; }
        .clean-input:focus { outline: none; border-color: var(--accent); background: #fffbeb; }
        .grid-responsive { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: start; width: 100%; padding: 0 20px; }
        
        /* Botones Nav */
        .nav-btn { font-family: 'Lato', sans-serif; font-weight: 700; font-size: 14px; padding: 10px 24px; border-radius: 50px; text-decoration: none; color: white; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: all 0.2s; display: flex; align-items: center; gap: 8px; border: none; }
        /* .nav-btn.whiteboard { background-color: var(--accent); }  <-- ELIMINADO PARA LIMPIEZA */
        .nav-btn.zoom { background-color: #6366f1; }
        .nav-btn.download { background-color: var(--primary); }
        .nav-btn.exit { background-color: #374151; }
        .nav-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0,0,0,0.15); }
        .nav-btn.zoom.active { background-color: #4338ca; box-shadow: inset 0 3px 6px rgba(0,0,0,0.3); border: 2px solid #818cf8; }

        .cursor-eraser { cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="white" stroke="black" stroke-width="1"/></svg>') 10 10, auto; }
        .fade-in { animation: fadeIn 0.15s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* UI Móvil */
        #scroll-progress { position: fixed; top: 0; left: 0; height: 4px; background: var(--primary); width: 0%; z-index: 9999; transition: width 0.1s; display: none; }
        #back-to-top { position: fixed; bottom: 20px; right: 20px; width: 45px; height: 45px; background: var(--text-main); color: white; border-radius: 50%; display: none; align-items: center; justify-content: center; z-index: 4000; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); transition: opacity 0.3s, transform 0.3s; opacity: 0; pointer-events: none; }
        #back-to-top.visible { opacity: 1; pointer-events: auto; transform: translateY(0); }

        /* --- ZONA MÓVIL CRÍTICA --- */
        @media (max-width: 1024px) {
            html, body { height: auto !important; overflow-y: auto !important; -webkit-overflow-scrolling: touch; touch-action: pan-y pinch-zoom !important; }
            #fixed-logo { width: 80px; top: 15px; left: 15px; } 
            #top-nav { top: 15px; right: 15px; gap: 8px; } 
            .nav-btn span { display: none; } 
            .nav-btn { padding: 8px; width: 36px; height: 36px; justify-content: center; }
            #btn-zoom, .nav-btn.whiteboard, #premium-dock { display: none !important; } /* Ocultamos Dock en móvil */
            #scroll-progress { display: block; }
            #back-to-top { display: flex; }

            .reveal { overflow: visible !important; position: relative !important; height: auto !important; touch-action: pan-y pinch-zoom !important; background: transparent !important; }
            .reveal .slides, .reveal .slides section, .reveal .slides section > * { display: block !important; position: static !important; height: auto !important; width: 100% !important; opacity: 1 !important; visibility: visible !important; transform: none !important; margin: 0 !important; text-align: left !important; left: 0 !important; top: 0 !important; pointer-events: auto !important; }
            .reveal section { padding: 80px 20px 60px 20px !important; border-bottom: 1px solid #eee; }
            
            input, textarea, .clean-input { position: relative !important; z-index: 2147483647 !important; font-size: 16px !important; padding: 15px !important; background: #fff !important; border: 2px solid #ccc !important; border-radius: 8px !important; margin-top: 10px !important; pointer-events: auto !important; -webkit-user-select: text !important; user-select: text !important; touch-action: manipulation !important; }
            .glass-card { padding: 20px; margin-bottom: 20px; } 
            .grid-responsive { grid-template-columns: 1fr; gap: 20px; padding: 0; } 
            .reveal h1 { font-size: 2.2em !important; line-height: 1.1 !important; }
        }

        @media print {
            #top-nav, #tucaneo-drawer, #safe-close-btn, #btn-zoom, .nav-btn, #floating-cta, #scroll-progress, #back-to-top, #premium-dock { display: none !important; }
            body { background: white; }
            .reveal { height: auto !important; overflow: visible !important; }
            .reveal section { page-break-after: always; height: auto !important; padding: 20px !important; display: block !important; opacity: 1 !important; }
            .glass-card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; }
        }

        /* --- FIX PARA ZOOM EN ESCRITORIO --- */
        .reveal.is-zoomed section {
            overflow-y: auto !important;       
            height: 80vh !important;           
            padding-bottom: 150px !important;  
            mask-image: linear-gradient(to bottom, black 90%, transparent 100%);
        }
        .reveal.is-zoomed section::-webkit-scrollbar { width: 12px; }
        .reveal.is-zoomed section::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); }
        .reveal.is-zoomed section::-webkit-scrollbar-thumb { 
            background-color: var(--accent); 
            border-radius: 20px; 
            border: 3px solid rgba(255,255,255,0.8);
        }
    </style>
</head>
<body>

    <div id="header-container"></div>

    <div id="scroll-progress"></div>

    <img id="fixed-logo" src="https://tucaneo.com/wp-content/uploads/2025/11/Plantilla-2-e1764351536337.png" alt="Tucaneo Academy">
    <a href="https://tucaneo.com" id="floating-cta">TUCANEO ACADEMY</a>

    <div id="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <i class="fas fa-arrow-up"></i>
    </div>

    <div id="tucaneo-drawer">
        <button id="safe-close-btn" onclick="toggleDrawer()"><i class="fas fa-times"></i></button>
        <div id="tools-root" style="width: 100%; height: 100%;"></div>
    </div>

    <div id="top-nav">
        <button id="btn-zoom" onclick="forceZoom()" class="nav-btn zoom" title="Acercar"><i class="fas fa-search-plus"></i> <span>Zoom</span></button>
        <a href="#" class="nav-btn download" onclick="window.print()"><i class="fas fa-file-pdf"></i> <span>PDF</span></a>
        <a href="https://tucaneo.com/" class="nav-btn exit"><i class="fas fa-sign-out-alt"></i> <span>Salir</span></a>
    </div>

    <div id="premium-dock" class="fixed bottom-8 left-1/2 -translate-x-1/2 z-[6000] flex items-center gap-2 p-2 bg-white/80 backdrop-blur-xl rounded-full shadow-2xl border border-white/50 transition-all hover:scale-[1.02]">
        
        <div class="flex gap-2 bg-gray-100/50 p-1 rounded-full">
            <button onclick="openTool('board')" title="Abrir Pizarra" class="group relative w-12 h-12 rounded-full bg-white shadow-sm hover:shadow-md flex items-center justify-center text-orange-500 transition-all hover:-translate-y-1 active:scale-95">
                <i class="fas fa-pen-nib text-xl"></i>
            </button>
            <button onclick="openTool('vocab')" title="Abrir Vocabulario" class="group relative w-12 h-12 rounded-full bg-white shadow-sm hover:shadow-md flex items-center justify-center text-emerald-600 transition-all hover:-translate-y-1 active:scale-95">
                <i class="fas fa-book text-xl"></i>
            </button>
        </div>

        <div class="w-px h-8 bg-gray-300/50 mx-1"></div>

        <div class="flex gap-2">
            <button onclick="react('confetti')" title="¡Fiesta!" class="group relative w-14 h-14 rounded-full bg-gradient-to-tr from-yellow-400 to-orange-500 shadow-lg hover:shadow-xl flex items-center justify-center text-white transition-all hover:-translate-y-1 hover:rotate-12 active:scale-95">
                <i class="fas fa-party-popper text-2xl"></i>
            </button>
            <button onclick="react('applause')" title="Aplausos" class="group relative w-14 h-14 rounded-full bg-gradient-to-tr from-blue-400 to-indigo-500 shadow-lg hover:shadow-xl flex items-center justify-center text-white transition-all hover:-translate-y-1 hover:-rotate-12 active:scale-95">
                <i class="fas fa-hands-clapping text-2xl"></i>
            </button>
        </div>

        <div class="w-px h-8 bg-gray-300/50 mx-1"></div>

        <div class="flex gap-1 bg-gray-100/50 p-1 rounded-full">
            <button onclick="react('error')" class="w-10 h-10 rounded-full bg-white hover:bg-red-50 text-red-600 shadow-sm flex items-center justify-center transition-all hover:scale-110 active:scale-90 border-2 border-transparent hover:border-red-100" title="Incorrecto">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

    </div>

    <div class="reveal">
        <div class="slides">

            <!-- 1. PORTADA -->
            <section data-background-image="https://tucaneo.com/wp-content/uploads/2025/12/social-dos-amigos-hablando.jpg" data-background-opacity="0.4">
                <div class="glass-card" style="text-align: center; max-width: 800px; margin: 0 auto; border-top: 5px solid var(--accent);">
                    <span style="color: var(--accent); font-weight: 800; letter-spacing: 3px; font-size: 0.8em; text-transform: uppercase;">Curso Avanzado C1</span>
                    <h1 style="font-size: 3.5em; margin: 15px 0;">Colombia: Cultura y Vida</h1>
                    <div style="width: 60px; height: 4px; background: var(--primary); margin: 30px auto;"></div>
                    <p style="font-size: 1.3em; color: #4b5563;">Un viaje profundo a través de la lectura y la conversación.</p>
                </div>
            </section>

            <!-- 2. CONTRASTES -->
            <section>
                <div style="width: 100%; max-width: 1100px; margin: 0 auto; box-sizing: border-box;">
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="color: var(--accent); font-weight: bold; letter-spacing: 2px; font-size: 0.8em; text-transform: uppercase;">Módulo 1</span>
                        <h2 style="font-size: 2.2em; margin: 5px 0;">Contrastes Geográficos</h2>
                        <p style="font-size: 0.8em; color: #9ca3af; font-style: italic; margin: 0;">Geographic Contrasts: Reading Comprehension</p>
                    </div>

                    <div style="display: flex; flex-wrap: wrap; gap: 30px; align-items: start; justify-content: center;">

                        <div style="flex: 1.2; min-width: 300px; display: flex; flex-direction: column; gap: 15px;">
                            
                            <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 5px solid #3b82f6; display: flex; gap: 15px; align-items: flex-start;">
                                <div style="background: #eff6ff; color: #3b82f6; min-width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5em;">
                                    <i class="fas fa-cloud-sun"></i>
                                </div>
                                <div>
                                    <h3 style="color: #1e3a8a; font-size: 1.1em; margin: 0 0 5px 0;">Bogotá (Andina)</h3>
                                    <p style="font-size: 0.85em; line-height: 1.5; color: #4b5563; margin: 0;">
                                        A 2.600 metros, mezcla formalidad con frío. Sus habitantes viven a un <strong>ritmo vertiginoso</strong>, similar a capitales europeas.
                                    </p>
                                </div>
                            </div>

                            <div style="background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border-left: 5px solid var(--accent); display: flex; gap: 15px; align-items: flex-start;">
                                <div style="background: #fffbeb; color: var(--accent); min-width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5em;">
                                    <i class="fas fa-umbrella-beach"></i>
                                </div>
                                <div>
                                    <h3 style="color: #b45309; font-size: 1.1em; margin: 0 0 5px 0;">Cartagena (Caribe)</h3>
                                    <p style="font-size: 0.85em; line-height: 1.5; color: #4b5563; margin: 0;">
                                        El tiempo se detiene. La historia vive en sus murallas y la brisa dicta un <strong>estilo relajado</strong>. Posee una riqueza histórica <em>antiquísima</em>.
                                    </p>
                                </div>
                            </div>

                        </div>

                        <div class="glass-card" style="flex: 1; min-width: 280px; padding: 25px; margin: 0; border-top: 5px solid var(--primary);">
                            <h4 style="margin: 0 0 20px 0; font-size: 1em; color: var(--text-main); border-bottom: 1px solid #eee; padding-bottom: 10px;">
                                <i class="fas fa-pen"></i> Comprensión:
                            </h4>
                            
                            <div style="display: flex; flex-direction: column; gap: 20px;">
                                <div>
                                    <label style="font-size: 0.8em; font-weight: bold; color: #6b7280; display: block; margin-bottom: 5px;">1. Ritmo de Vida</label>
                                    <input class="clean-input" placeholder="Bogotá es rápida, Cartagena..." style="font-size: 0.9em; background: #f9fafb; padding: 8px; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="font-size: 0.8em; font-weight: bold; color: #6b7280; display: block; margin-bottom: 5px;">2. Comparación Europa</label>
                                    <input class="clean-input" placeholder="Se parece en..." style="font-size: 0.9em; background: #f9fafb; padding: 8px; border-radius: 6px;">
                                </div>
                                <div>
                                    <label style="font-size: 0.8em; font-weight: bold; color: #6b7280; display: block; margin-bottom: 5px;">3. Cualidad Única</label>
                                    <input class="clean-input" placeholder="Es antiquísima..." style="font-size: 0.9em; background: #f9fafb; padding: 8px; border-radius: 6px;">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- 3. CARNAVAL -->
            <section>
                <div style="max-width: 1000px; margin: 0 auto;">
                    <div class="grid-responsive" style="align-items: start;">
                        <div>
                            <h2 style="margin-bottom: 20px;">Planes de Carnaval</h2>
                            <div class="glass-card" style="border-top: 6px solid var(--accent); padding: 30px;">
                                <p style="font-style: italic; color: #555; line-height: 1.8;">
                                    "Este febrero, Julián y yo <strong>vamos a viajar</strong> a Barranquilla el viernes. Hemos reservado un hostal céntrico porque nuestra intención es no perdernos la fiesta.
                                    <br><br>
                                    El sábado, <strong>vamos a asistir</strong> a la Batalla de Flores. <strong>Voy a llevar</strong> mi cámara. No <strong>voy a revisar</strong> mi correo; mi objetivo es desconectar."
                                </p>
                            </div>
                        </div>
                        
                        <div style="background: white; padding: 30px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.05);">
                            <h3 style="font-size: 1.2em; color: var(--primary); margin-bottom: 20px;"><i class="fas fa-check-circle"></i> Comprensión</h3>
                            
                            <div class="question-row">
                                <span class="question-label"><i class="fas fa-calendar-alt"></i> ¿Cuándo viajan?</span>
                                <input class="clean-input" placeholder="El viernes...">
                            </div>
                            <div class="question-row" style="margin-top: 20px;">
                                <span class="question-label"><i class="fas fa-walking"></i> ¿Qué harán el sábado?</span>
                                <input class="clean-input" placeholder="Van a asistir a...">
                            </div>
                            <div class="question-row" style="margin-top: 20px;">
                                <span class="question-label"><i class="fas fa-ban"></i> ¿Qué NO harán?</span>
                                <input class="clean-input" placeholder="No van a...">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 4. GUAJIRA (Extremos) -->
            <section data-background-image="https://images.unsplash.com/photo-1444535384357-36e792c39a04?auto=format&fit=crop&q=80" data-background-opacity="0.15">
                <div style="width: 100%; max-width: 1100px; margin: 0 auto; box-sizing: border-box;">
                    
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div class="eng-pill"><i class="fas fa-sun"></i> Grammar in Context</div>
                        <h2 style="font-size: 2.2em; margin: 10px 0;">La Guajira: Kit de Supervivencia</h2>
                        <p style="color: #666; font-size: 0.9em;">Reacciona a las situaciones usando el verbo <strong>TENER</strong>.</p>
                    </div>

                    <div class="grid-3" style="gap: 20px;">
                        
                        <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border-top: 5px solid #ef4444; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <i class="fas fa-temperature-high" style="font-size: 3em; color: #ef4444;"></i>
                            </div>
                            <h4 style="margin: 0; color: #b91c1c; font-size: 1.1em; text-align: center;">Situación 1:</h4>
                            <p style="font-size: 0.9em; color: #4b5563; text-align: center; margin: 10px 0 20px 0; background: #fff5f5; padding: 10px; border-radius: 8px;">
                                "Son las 12:00 PM. Estamos a 40°C en el desierto."
                            </p>
                            
                            <label style="font-size: 0.75em; font-weight: bold; color: #999; margin-bottom: 5px;">¿Cómo te sientes?</label>
                            <input class="clean-input" placeholder="¡Uff! Yo tengo..." style="font-size: 0.95em;">
                        </div>

                        <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border-top: 5px solid var(--accent); display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <i class="fas fa-exclamation-triangle" style="font-size: 3em; color: var(--accent);"></i>
                            </div>
                            <h4 style="margin: 0; color: #b45309; font-size: 1.1em; text-align: center;">Situación 2:</h4>
                            <p style="font-size: 0.9em; color: #4b5563; text-align: center; margin: 10px 0 20px 0; background: #fffbeb; padding: 10px; border-radius: 8px;">
                                "Hay cactus con espinas y animales peligrosos."
                            </p>
                            
                            <label style="font-size: 0.75em; font-weight: bold; color: #999; margin-bottom: 5px;">¿Qué consejo das?</label>
                            <input class="clean-input" placeholder="¡Por favor, ten...!" style="font-size: 0.95em;">
                        </div>

                        <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); border-top: 5px solid #3b82f6; display: flex; flex-direction: column;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <i class="fas fa-user-check" style="font-size: 3em; color: #3b82f6;"></i>
                            </div>
                            <h4 style="margin: 0; color: #1e3a8a; font-size: 1.1em; text-align: center;">Situación 3:</h4>
                            <p style="font-size: 0.9em; color: #4b5563; text-align: center; margin: 10px 0 20px 0; background: #eff6ff; padding: 10px; border-radius: 8px;">
                                "El guía dice: 'No beban agua del grifo, es malo'."
                            </p>
                            
                            <label style="font-size: 0.75em; font-weight: bold; color: #999; margin-bottom: 5px;">¿Estás de acuerdo?</label>
                            <input class="clean-input" placeholder="Sí, el guía tiene..." style="font-size: 0.95em;">
                        </div>

                    </div>
                </div>
            </section>

            <!-- 5. TRABAJO -->
            <section>
                <div style="max-width: 1000px; margin: 0 auto;">
                    <h2>Español Corporativo</h2>
                    
                    <div class="glass-card" style="border-left: 8px solid #3b82f6; margin-top: 20px;">
                        <h4 style="color: #1e3a8a; font-weight: bold; font-size: 1.2em; margin-bottom: 10px;">TechSolutions Medellín</h4>
                        <p style="font-size: 1em; color: #374151;">
                            Nuestra sede en Medellín es el corazón de nuestra innovación. A menudo preguntan cómo se compara con Silicon Valley. La respuesta es simple: esta oficina es <strong>igual de tecnológica que</strong> la sede central.
                            <br><br>
                            Sin embargo, el ambiente humano nos diferencia. Trabajar aquí es <strong>mucho mejor que</strong> en una corporación tradicional. Buscamos talento que sea técnicamente <strong>buenísimo</strong>.
                        </p>
                    </div>

                    <div class="grid-3">
                        <div class="question-row">
                            <span class="question-label" style="color:#2563eb;">1. Igualdad</span>
                            <input class="clean-input" placeholder="Igual de...">
                        </div>
                        <div class="question-row">
                            <span class="question-label" style="color:#16a34a;">2. Superioridad</span>
                            <input class="clean-input" placeholder="Mucho mejor...">
                        </div>
                        <div class="question-row">
                            <span class="question-label" style="color:#ca8a04;">3. Superlativo</span>
                            <input class="clean-input" placeholder="Buenísimo...">
                        </div>
                    </div>
                </div>
            </section>

            <!-- 6. CORRECTOR DE ESTILO -->
            <section>
                <div style="max-width: 900px; margin: 0 auto;">
                    <h2 style="text-align: center; margin-bottom: 30px;"><i class="fas fa-edit" style="color: var(--accent);"></i> Corrector de Estilo</h2>
                    
                    <div style="background: #fff5f5; padding: 40px; border-radius: 15px; border-left: 6px solid #ef4444; font-size: 1.1em; text-align: justify; box-shadow: 0 10px 30px rgba(0,0,0,0.05); color: #333; line-height: 1.8;">
                        <i class="fas fa-quote-left" style="color: #ef4444; opacity: 0.2; font-size: 2em; display: block; margin-bottom: 10px;"></i>
                        "Estimado profesor: Ayer visité el museo. Mañana, mi familia y yo <strong style="color: #dc2626; text-decoration: underline wavy;">ir a conocer</strong> el centro. Mi hermano de 15 años es <strong style="color: #dc2626; text-decoration: underline wavy;">más mayor</strong> que mi primo.
                        Creo que la comida aquí es <strong style="color: #dc2626; text-decoration: underline wavy;">más mejor</strong> que en mi país. Ahora tengo <strong style="color: #dc2626; text-decoration: underline wavy;">mucho hambre</strong>."
                    </div>

                    <div class="grid-responsive" style="margin-top: 30px; gap: 20px;">
                        <input class="clean-input" placeholder="1. Futuro (Voy a...)">
                        <input class="clean-input" placeholder="2. Edad (Mayor...)">
                        <input class="clean-input" placeholder="3. Irregular (Mejor...)">
                        <input class="clean-input" placeholder="4. Género (Mucha...)">
                    </div>
                </div>
            </section>

            <!-- 7. ANIMALES -->
           
<section data-background-image="https://images.unsplash.com/photo-1534234828569-1f27264e9799?auto=format&fit=crop&q=80" data-background-opacity="0.05">
                <div style="max-width: 1000px; margin: 0 auto; height: 100%; display: flex; flex-direction: column; justify-content: flex-start; padding-top: 20px;">
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="color: var(--primary); font-weight: bold; letter-spacing: 3px; text-transform: uppercase; font-size: 0.8em;">Biodiversidad</span>
                        <h2 style="font-size: 2.5em; margin: 5px 0; color: var(--primary);">Fauna Colombiana</h2>
                    </div>
                    
                    <div class="grid-responsive" style="margin-bottom: 20px; gap: 20px; align-items: stretch;">
                        
                        <div style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-3px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="position: relative; height: 160px; background-color: #f3f4f6;">
                                <img src="https://tucaneo.com/wp-content/uploads/2025/12/Condor-scaled.png" 
                                     style="width: 100%; height: 100%; object-fit: cover; object-position: center;" 
                                     alt="El Cóndor">
                                
                                <div style="position: absolute; bottom: -20px; right: 20px; background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: 3px solid #374151;">
                                    <i class="fas fa-crow" style="color: #374151; font-size: 1.2em;"></i>
                                </div>
                            </div>
                            <div style="padding: 25px 20px 20px 20px; flex-grow: 1; text-align: center;">
                                <h3 style="margin: 0; font-size: 1.4em; color: #1f2937;">El Cóndor</h3>
                                <p style="color: #6b7280; font-size: 0.8em; margin-top: 5px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">
                                    <i class="fas fa-mountain" style="color: #374151;"></i> Región Andina
                                </p>
                                <p style="font-size: 0.95em; color: #4b5563; line-height: 1.5; margin-top: 10px;">
                                    Simboliza la <strong>libertad</strong>. Es el ave voladora más grande del mundo.
                                </p>
                            </div>
                        </div>

                        <div style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.08); display: flex; flex-direction: column; transition: transform 0.3s ease;" onmouseover="this.style.transform='translateY(-3px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="position: relative; height: 160px; background-color: #fce7f3;">
                                <img src="https://tucaneo.com/wp-content/uploads/2025/12/Delfin-rosado-scaled.png" 
                                     style="width: 100%; height: 100%; object-fit: cover; object-position: center;" 
                                     alt="Delfín Rosado">
                                
                                <div style="position: absolute; bottom: -20px; right: 20px; background: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border: 3px solid #ec4899;">
                                    <i class="fas fa-water" style="color: #ec4899; font-size: 1.2em;"></i>
                                </div>
                            </div>
                            <div style="padding: 25px 20px 20px 20px; flex-grow: 1; text-align: center;">
                                <h3 style="margin: 0; font-size: 1.4em; color: #1f2937;">Delfín Rosado</h3>
                                <p style="color: #ec4899; font-size: 0.8em; margin-top: 5px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px;">
                                    <i class="fas fa-leaf" style="color: #ec4899;"></i> Amazonas
                                </p>
                                <p style="font-size: 0.95em; color: #4b5563; line-height: 1.5; margin-top: 10px;">
                                    Animal <strong>sagrado</strong> e inteligente. Su color rosado es único en el mundo.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card" style="padding: 20px; border-top: none; border-left: 6px solid var(--accent); display: flex; flex-direction: column; gap: 15px; margin-bottom: 0; background: rgba(255,255,255,0.95);">
                        
                        <div>
                            <h4 style="margin: 0 0 5px 0; font-size: 1.2em; color: var(--accent); display: flex; align-items: center; gap: 10px; font-weight: 800;">
                                <i class="fas fa-pencil-alt"></i> ACTIVIDAD DE ESCRITURA:
                            </h4>
                            <p style="margin: 0; font-size: 1em; color: #555;">
                                Compara estos dos animales usando comparativos (<em>más... que, tan... como</em>) y superlativos.
                            </p>
                        </div>

                        <textarea class="clean-input" style="height: 80px; resize: none; border: 2px dashed #e5e7eb; padding: 15px; border-radius: 12px; background: #fff; font-size: 1em; color: #666;" placeholder="Escribe aquí... Ejemplo: El Cóndor vive más alto que el delfín..."></textarea>
                    </div>
                </div>
            </section>

            <!-- 8. CIERRE -->
            <section data-background-image="https://tucaneo.com/wp-content/uploads/2025/12/social-persona-telefono.jpg" data-background-opacity="0.10">
                <div style="width: 100%; max-width: 1200px; margin: 0 auto; box-sizing: border-box;">
                    
                    <div style="text-align: center; margin-bottom: 40px;">
                        <div class="eng-pill"><i class="fas fa-flag-checkered"></i> Summary & Homework</div>
                        <h1 style="font-size: 3.5em; margin: 10px 0; color: #333;">¡Misión Cumplida!</h1>
                    </div>

                    <div style="display: flex; flex-wrap: wrap; gap: 40px; justify-content: center; align-items: stretch;">

                        <div class="glass-card" style="flex: 1; min-width: 300px; margin: 0; display: flex; flex-direction: column; border-left: 6px solid var(--primary);">
                            <h3 style="color: var(--primary); font-size: 1.4em; margin: 0 0 20px 0; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                                <i class="fas fa-clipboard-check"></i> Hoy lograste:
                            </h3>
                            <ul style="list-style: none; padding: 0; margin: 0; flex-grow: 1; display: flex; flex-direction: column; gap: 20px;">
                                <li style="font-size: 1.1em; display: flex; align-items: center; gap: 15px; color: #4b5563;">
                                    <div style="background: #d1fae5; color: var(--primary); width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    Analizar textos complejos.
                                </li>
                                <li style="font-size: 1.1em; display: flex; align-items: center; gap: 15px; color: #4b5563;">
                                    <div style="background: #d1fae5; color: var(--primary); width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                        <i class="fas fa-check"></i>
                                    </div>
                                    Usar comparativos sin ayuda.
                                </li>
                            </ul>
                        </div>

                        <div style="flex: 1; min-width: 300px; display: flex; flex-direction: column; gap: 25px;">

                            <div style="background: #fff7ed; padding: 25px; border-radius: 12px; border: 2px dashed #fdba74; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                                <strong style="color: var(--accent); display: block; margin-bottom: 10px; font-size: 1.1em;">
                                    <i class="fas fa-home"></i> TAREA PARA LA CASA:
                                </strong>
                                <p style="color: #555; margin: 0; line-height: 1.5;">
                                    Elige un lugar turístico de <strong>TU país</strong> y escribe un párrafo comparándolo con Colombia.
                                </p>
                            </div>

                            <a href="https://tucaneo.com" target="_blank" style="background: var(--primary); color: white; padding: 25px; border-radius: 12px; text-decoration: none; font-weight: bold; font-size: 1.2em; box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3); display: flex; align-items: center; justify-content: center; gap: 15px; transition: transform 0.2s; text-align: center; margin-top: auto;">
                                <span>Ir a Tucaneo.com</span> <i class="fas fa-arrow-right"></i>
                            </a>

                        </div>

                    </div>
                </div>
            </section>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useLayoutEffect } = React;
        const Icon = ({ p }) => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">{p}</svg>;
        const I = { Pencil: <Icon p={<><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></>} />, Eraser: <Icon p={<><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/><path d="M22 21H7"/><path d="m5 11 9 9"/></>} />, Square: <Icon p={<rect width="18" height="18" x="3" y="3" rx="2" />} />, Circle: <Icon p={<circle cx="12" cy="12" r="10" />} />, Type: <Icon p={<><polyline points="4 7 4 4 20 4 20 7"/><line x1="9" x2="15" y1="20" y2="20"/><line x1="12" x2="12" y1="4" y2="20"/></>} />, Line: <Icon p={<line x1="5" y1="12" x2="19" y2="12" />} />, Undo: <Icon p={<><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></>} />, Redo: <Icon p={<><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 3.7"/></>} />, Trash: <Icon p={<><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></>} />, Save: <Icon p={<><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></>} />, Pointer: <Icon p={<><path d="m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/><path d="m13 13 6 6"/></>} />, Book: <Icon p={<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>} />, Art: <Icon p={<circle cx="13.5" cy="6.5" r=".5"/>} />, Copy: <Icon p={<rect width="14" height="14" x="8" y="8" rx="2"/>} /> };
        const getHandles = (el) => { const pad = 0; const x = el.x; const y = el.y; const w = el.width; const h = el.height; return { tl: { x: x - pad, y: y - pad, cursor: 'nwse-resize' }, tr: { x: x + w + pad, y: y - pad, cursor: 'nesw-resize' }, bl: { x: x - pad, y: y + h + pad, cursor: 'nesw-resize' }, br: { x: x + w + pad, y: y + h + pad, cursor: 'nwse-resize' } }; };
        const isPointInHandle = (x, y, handle) => { const size = 12; return x >= handle.x - size && x <= handle.x + size && y >= handle.y - size && y <= handle.y + size; };
        function VocabModule() { const [list, setList] = useState(() => { try { return JSON.parse(localStorage.getItem('tucaneo_vocab') || '[]'); } catch { return []; } }); const [w, setW] = useState(''); const [d, setD] = useState(''); const [manualCopy, setManualCopy] = useState(null); useEffect(() => { try { localStorage.setItem('tucaneo_vocab', JSON.stringify(list)); } catch {} }, [list]); const add = (e) => { e.preventDefault(); if(!w.trim()) return; setList([...list, { w, d }]); setW(''); setD(''); }; const copy = () => { const text = list.map(i => `${i.w}: ${i.d}`).join('\n'); if(!text) return alert("Lista vacía"); try { navigator.clipboard.writeText(text).then(()=>alert("Copiado!"), ()=>setManualCopy(text)); } catch { setManualCopy(text); } }; return ( <div className="flex flex-col h-full bg-slate-50 p-6 pt-8 relative"> {manualCopy && <div className="absolute inset-0 bg-black/50 z-50 flex items-center justify-center p-4"><div className="bg-white p-4 rounded-lg w-full max-w-sm"><p className="font-bold">Copia:</p><textarea className="w-full h-32 border p-2" readOnly value={manualCopy} onClick={e=>e.target.select()}/><button onClick={()=>setManualCopy(null)} className="w-full bg-slate-800 text-white py-2 mt-2 rounded">Cerrar</button></div></div>} <h2 className="text-xl font-bold text-slate-800 mb-4 flex gap-2">{I.Book} Vocabulario</h2> <form onSubmit={add} className="bg-white p-4 rounded-xl shadow-sm mb-4 border"><input value={w} onChange={e=>setW(e.target.value)} placeholder="Palabra" className="w-full border-b p-2 mb-2 outline-none focus:border-orange-500"/><input value={d} onChange={e=>setD(e.target.value)} placeholder="Significado" className="w-full border-b p-2 outline-none focus:border-orange-500"/><button type="submit" className="w-full bg-orange-500 text-white py-2 rounded font-bold hover:bg-orange-600 mt-2">Añadir</button></form> <div className="flex-1 overflow-y-auto bg-white rounded-xl border p-4 shadow-inner mb-4"><ul className="space-y-2">{list.map((i,k)=>(<li key={k} className="flex justify-between border-b pb-1"><span><b>{i.w}</b> <span className="text-gray-500">{i.d}</span></span><button onClick={()=>setList(list.filter((_,x)=>x!==k))} className="text-red-400">×</button></li>))}</ul></div> <button onClick={copy} className="bg-slate-800 text-white py-2 rounded-lg font-bold flex justify-center gap-2 hover:bg-slate-900">{I.Copy} Copiar Lista</button> </div> ); }
        function WhiteboardModule() { const [elements, setElements] = useState([]); const [history, setHistory] = useState([]); const [historyStep, setHistoryStep] = useState(0); const [tool, setTool] = useState('pencil'); const [action, setAction] = useState('none'); const [panOffset, setPanOffset] = useState({x:0, y:0}); const [writingPos, setWritingPos] = useState(null); const [selectedId, setSelectedId] = useState(null); const [confirmClear, setConfirmClear] = useState(false); const [resizeHandle, setResizeHandle] = useState(null); const [dragOffset, setDragOffset] = useState({x:0, y:0}); const [color, setColor] = useState('#000000'); const [strokeWidth, setStrokeWidth] = useState(3); const [size, setSize] = useState({w:0, h:0}); const [hoverCursor, setHoverCursor] = useState(null); const containerRef = useRef(null); const canvasRef = useRef(null); const textAreaRef = useRef(null); const generateId = () => Math.random().toString(36).substr(2, 9); useEffect(() => { if(!containerRef.current) return; const obs = new ResizeObserver(() => setSize({ w: containerRef.current.offsetWidth, h: containerRef.current.offsetHeight })); obs.observe(containerRef.current); return () => obs.disconnect(); }, []); useEffect(() => { if(tool !== 'selection') { setSelectedId(null); setResizeHandle(null); } if (confirmClear) setConfirmClear(false); if (action === 'writing' && tool !== 'text') finishWriting(); }, [tool]); useEffect(() => { if (action === 'writing' && textAreaRef.current) { setTimeout(() => textAreaRef.current?.focus(), 10); } }, [action, writingPos]); useEffect(() => { if(selectedId && !resizeHandle && action !== 'moving') { const index = elements.findIndex(el => el.id === selectedId); if(index !== -1) { const el = elements[index]; if(el.color !== color || el.strokeWidth !== strokeWidth) { const newEls = [...elements]; const fontSize = Math.max(12, strokeWidth * 4); const newWidth = el.type === 'text' ? (el.text.length * fontSize * 0.6) : el.width; const newHeight = el.type === 'text' ? fontSize : el.height; newEls[index] = { ...el, color, strokeWidth, width: newWidth, height: newHeight }; setElements(newEls); } } } }, [color, strokeWidth]); useEffect(() => { if(selectedId) { const el = elements.find(e => e.id === selectedId); if(el) { setColor(el.color); setStrokeWidth(el.strokeWidth); } } }, [selectedId]); useLayoutEffect(() => { const ctx = canvasRef.current?.getContext('2d'); if(!ctx || size.w === 0) return; canvasRef.current.width = size.w; canvasRef.current.height = size.h; ctx.clearRect(0,0,size.w,size.h); ctx.save(); ctx.fillStyle='#ffffff'; ctx.fillRect(0,0,size.w,size.h); ctx.strokeStyle='#f4f4f5'; ctx.lineWidth=1; ctx.beginPath(); const gridSize = 40; const offsetX = panOffset.x % gridSize; const offsetY = panOffset.y % gridSize; for(let x=offsetX; x<size.w; x+=gridSize) { ctx.moveTo(x,0); ctx.lineTo(x,size.h); } for(let y=offsetY; y<size.h; y+=gridSize) { ctx.moveTo(0,y); ctx.lineTo(size.w,y); } ctx.stroke(); ctx.restore(); ctx.save(); ctx.translate(panOffset.x, panOffset.y); elements.forEach(el => { ctx.lineCap = 'round'; ctx.lineJoin = 'round'; if (el.type === 'eraser') { ctx.strokeStyle = '#ffffff'; ctx.lineWidth = el.strokeWidth * 4; } else { ctx.strokeStyle = el.color; ctx.lineWidth = el.strokeWidth; ctx.fillStyle = el.color; } if((el.type === 'pencil' || el.type === 'eraser') && el.points.length > 0) { ctx.beginPath(); ctx.moveTo(el.points[0].x, el.points[0].y); for(let i=1; i<el.points.length; i++) ctx.lineTo(el.points[i].x, el.points[i].y); ctx.stroke(); } else if (el.type === 'rectangle') { ctx.strokeRect(el.x, el.y, el.width, el.height); } else if (el.type === 'circle') { ctx.beginPath(); const r = Math.sqrt(Math.pow(el.width,2)+Math.pow(el.height,2))/2; ctx.arc(el.x+el.width/2, el.y+el.height/2, Math.abs(r), 0, 2*Math.PI); ctx.stroke(); } else if (el.type === 'line') { ctx.beginPath(); ctx.moveTo(el.x, el.y); ctx.lineTo(el.x+el.width, el.y+el.height); ctx.stroke(); } else if (el.type === 'text' && el.text) { const fontSize = Math.max(12, el.strokeWidth * 4); ctx.font = `${fontSize}px sans-serif`; ctx.textBaseline = 'top'; ctx.fillText(el.text, el.x, el.y); const metrics = ctx.measureText(el.text); el.width = metrics.width; el.height = fontSize; } }); if(selectedId) { const el = elements.find(e => e.id === selectedId); if(el) { const isPencil = el.type === 'pencil' || el.type === 'eraser'; ctx.strokeStyle = '#2563eb'; ctx.lineWidth = 1; ctx.setLineDash([5, 5]); let bx = el.x, by = el.y, bw = el.width, bh = el.height; if(isPencil) { const xs = el.points.map(p=>p.x); const ys = el.points.map(p=>p.y); bx = Math.min(...xs); by = Math.min(...ys); bw = Math.max(...xs) - bx; bh = Math.max(...ys) - by; } else { if(bw < 0) { bx += bw; bw = Math.abs(bw); } if(bh < 0) { by += bh; bh = Math.abs(bh); } } ctx.strokeRect(bx - 5, by - 5, bw + 10, bh + 10); ctx.setLineDash([]); if(!isPencil) { const handles = getHandles({x:bx, y:by, width:bw, height:bh}); ctx.fillStyle = '#ffffff'; ctx.strokeStyle = '#2563eb'; ctx.lineWidth = 2; Object.values(handles).forEach(h => { ctx.beginPath(); ctx.rect(h.x - 4, h.y - 4, 8, 8); ctx.fill(); ctx.stroke(); }); } } } ctx.restore(); }, [elements, size, panOffset, selectedId]); const updateHistory = (newEls) => { const newHist = history.slice(0, historyStep + 1); newHist.push(newEls); setHistory(newHist); setHistoryStep(newHist.length - 1); }; const undo = () => { if(historyStep>0) { setHistoryStep(s=>s-1); setElements(history[historyStep-1]); setSelectedId(null); } else { setHistoryStep(-1); setElements([]); setSelectedId(null); } }; const redo = () => { if(historyStep<history.length-1) { setHistoryStep(s=>s+1); setElements(history[historyStep+1]); setSelectedId(null); } }; const getPos = (e) => { const rect = canvasRef.current.getBoundingClientRect(); const cx = e.touches ? e.touches[0].clientX : e.clientX; const cy = e.touches ? e.touches[0].clientY : e.clientY; return { x: cx - rect.left - panOffset.x, y: cy - rect.top - panOffset.y }; }; const isPointInElement = (x, y, el) => { const padding = 10; let bx = el.x, by = el.y, bw = el.width, bh = el.height; if(el.type === 'pencil' || el.type === 'eraser') { const xs = el.points.map(p=>p.x); const ys = el.points.map(p=>p.y); bx = Math.min(...xs); by = Math.min(...ys); bw = Math.max(...xs) - bx; bh = Math.max(...ys) - by; } else if(el.type === 'text') { const fontSize = Math.max(12, el.strokeWidth * 4); bw = el.width || (el.text.length * fontSize * 0.6); bh = el.height || fontSize; } else { if(bw < 0) { bx += bw; bw = Math.abs(bw); } if(bh < 0) { by += bh; bh = Math.abs(bh); } } return x >= bx - padding && x <= bx + bw + padding && y >= by - padding && y <= by + bh + padding; }; const handleDown = (e) => { if(['BUTTON','INPUT','TEXTAREA','LABEL','SELECT'].includes(e.target.tagName)) return; e.preventDefault(); const {x,y} = getPos(e); if(tool === 'selection') { if(selectedId) { const el = elements.find(e => e.id === selectedId); if(el && (el.type !== 'pencil' && el.type !== 'eraser')) { let bx = el.x, by = el.y, bw = el.width, bh = el.height; if(bw < 0) { bx += bw; bw = Math.abs(bw); } if(bh < 0) { by += bh; bh = Math.abs(bh); } const handles = getHandles({x:bx, y:by, width:bw, height:bh}); for(const key in handles) { if(isPointInHandle(x, y, handles[key])) { setResizeHandle(key); setAction('resizing'); return; } } } } let foundId = null; if(selectedId) { const el = elements.find(e => e.id === selectedId); if(el && isPointInElement(x, y, el)) foundId = selectedId; } if(!foundId) { for(let i=elements.length-1; i>=0; i--) { if(isPointInElement(x, y, elements[i])) { foundId = elements[i].id; break; } } } setSelectedId(foundId); if(foundId) { setAction('moving'); const el = elements.find(e => e.id === foundId); setDragOffset({ x: x - el.x, y: y - el.y }); } else { setAction('panning'); } return; } if(tool === 'text') { if(action==='writing') finishWriting(); else { setAction('writing'); setWritingPos({x,y}); } return; } setAction('drawing'); const newEl = { id: generateId(), type: tool, x, y, width:0, height:0, color, strokeWidth, points: (tool==='pencil' || tool==='eraser') ? [{x,y}] : undefined }; setElements(prev=>[...prev, newEl]); }; const handleMove = (e) => { const {x,y} = getPos(e); if(tool === 'selection' && selectedId && action === 'none') { const el = elements.find(e => e.id === selectedId); if(el) { if(el.type !== 'pencil' && el.type !== 'eraser') { let bx = el.x, by = el.y, bw = el.width, bh = el.height; if(bw < 0) { bx += bw; bw = Math.abs(bw); } if(bh < 0) { by += bh; bh = Math.abs(bh); } const handles = getHandles({x:bx, y:by, width:bw, height:bh}); let cursor = null; for(const key in handles) { if(isPointInHandle(x, y, handles[key])) cursor = handles[key].cursor; } setHoverCursor(cursor); } if(!hoverCursor && isPointInElement(x, y, el)) { setHoverCursor('move'); } } else { setHoverCursor(null); } } else if (action === 'none') { setHoverCursor(null); } if(action === 'panning') { setPanOffset(p=>({x:p.x+(e.movementX||0), y:p.y+(e.movementY||0)})); return; } if(action === 'moving' && selectedId) { const els = [...elements]; const index = els.findIndex(e => e.id === selectedId); const el = els[index]; const newX = x - dragOffset.x; const newY = y - dragOffset.y; if (el.type === 'pencil' || el.type === 'eraser') { const dx = newX - el.x; const dy = newY - el.y; const newPoints = el.points.map(p => ({ x: p.x + dx, y: p.y + dy })); els[index] = { ...el, x: newX, y: newY, points: newPoints }; } else { els[index] = { ...el, x: newX, y: newY }; } setElements(els); return; } if(action === 'resizing' && selectedId && resizeHandle) { const els = [...elements]; const index = els.findIndex(e => e.id === selectedId); const el = els[index]; if(el.type === 'text') { let newHeight = el.height; if(resizeHandle.includes('b')) newHeight = y - el.y; if(resizeHandle.includes('t')) newHeight = el.y + el.height - y; if(newHeight < 10) newHeight = 10; const newStrokeWidth = newHeight / 4; els[index] = { ...el, strokeWidth: newStrokeWidth, height: newHeight, width: el.text.length * newHeight * 0.6 }; } else { let newX = el.x, newY = el.y, newW = el.width, newH = el.height; if (resizeHandle === 'br') { newW = x - newX; newH = y - newY; } else if (resizeHandle === 'bl') { newW = (newX + newW) - x; newX = x; newH = y - newY; } else if (resizeHandle === 'tr') { newW = x - newX; newH = (newY + newH) - y; newY = y; } else if (resizeHandle === 'tl') { newW = (newX + newW) - x; newX = x; newH = (newY + newH) - y; newY = y; } els[index] = { ...el, x: newX, y: newY, width: newW, height: newH }; } setElements(els); return; } if(action === 'drawing') { const els = [...elements]; const curr = els[els.length-1]; if(tool==='pencil' || tool==='eraser') curr.points.push({x,y}); else { curr.width = x - curr.x; curr.height = y - curr.y; } setElements(els); } }; const handleUp = () => { if(action==='drawing' || action==='resizing' || action==='moving') updateHistory(elements); if(action !== 'writing') { setAction('none'); setResizeHandle(null); } }; const finishWriting = () => { if(!textAreaRef.current || !writingPos) { setAction('none'); setWritingPos(null); return; } const text = textAreaRef.current.value.trim(); if(text) { const fontSize = Math.max(12, strokeWidth * 4); const approxWidth = text.length * fontSize * 0.6; const newEls = [...elements, { id:generateId(), type:'text', x:writingPos.x, y:writingPos.y, text, color, strokeWidth, width: approxWidth, height: fontSize }]; setElements(newEls); updateHistory(newEls); } setAction('none'); setWritingPos(null); }; const save = () => { const a = document.createElement('a'); a.download='pizarra-tucaneo.png'; a.href=canvasRef.current.toDataURL(); a.click(); }; let cursorClass = 'cursor-crosshair'; if(hoverCursor) cursorClass = `cursor-${hoverCursor}`; else if(tool === 'selection') cursorClass = action==='panning' ? 'cursor-grabbing' : 'cursor-default'; else if(tool === 'text') cursorClass = 'cursor-text'; else if(tool === 'eraser') cursorClass = 'cursor-eraser'; return ( <div ref={containerRef} className={`absolute inset-0 bg-white select-none touch-none overflow-hidden ${cursorClass}`}> <div className="absolute top-1/2 -translate-y-1/2 left-4 z-50 flex flex-col gap-2 bg-white/95 p-2 rounded-xl shadow-lg border"> <button onClick={()=>setTool('selection')} title="Seleccionar (Mover y Editar)" className={`p-3 rounded-lg transition-colors ${tool==='selection'?'bg-orange-100 text-orange-600':'text-gray-400 hover:bg-gray-100'}`}>{I.Pointer}</button> <div className="w-full h-px bg-gray-200 my-1"></div> <button onClick={()=>setTool('eraser')} title="Borrador" className={`p-3 rounded-lg transition-colors ${tool==='eraser'?'bg-orange-100 text-orange-600':'text-gray-400 hover:bg-gray-100'}`}>{I.Eraser}</button> {[{id:'pencil',i:I.Pencil, t:'Lápiz'},{id:'rectangle',i:I.Square, t:'Cuadrado'},{id:'circle',i:I.Circle, t:'Círculo'},{id:'line',i:I.Line, t:'Línea'},{id:'text',i:I.Type, t:'Texto'}].map(t=> ( <button key={t.id} onClick={()=>setTool(t.id)} title={t.t} className={`p-3 rounded-lg transition-colors ${tool===t.id?'bg-orange-100 text-orange-600':'text-gray-400 hover:bg-gray-100'}`}>{t.i}</button> ))} </div> <div className="absolute bottom-4 left-1/2 -translate-x-1/2 z-50 bg-white/95 px-6 py-3 rounded-full shadow-lg border flex items-center gap-4 w-max max-w-[90vw] overflow-x-auto"> <input type="color" value={color} onChange={e=>setColor(e.target.value)} className="w-8 h-8 rounded-full border-none cursor-pointer flex-shrink-0" title="Color" /> <div className="flex items-center gap-2 flex-shrink-0"> <span className="text-xs font-bold text-gray-400 hidden md:block">{selectedId ? 'EDITAR' : 'GROSOR'}</span> <input type="range" min="1" max="20" value={strokeWidth} onChange={e=>setStrokeWidth(Number(e.target.value))} className="w-24 accent-orange-500" title="Tamaño" /> </div> <div className="w-px h-8 bg-gray-200 mx-1 hidden md:block"></div> <div className="flex gap-1 flex-shrink-0"> <button onClick={undo} disabled={historyStep<0} className="p-2 text-gray-500 hover:bg-gray-100 rounded-full disabled:opacity-30">{I.Undo}</button> <button onClick={redo} disabled={historyStep>=history.length-1} className="p-2 text-gray-500 hover:bg-gray-100 rounded-full disabled:opacity-30">{I.Redo}</button> <button onClick={()=>{if(!confirmClear){setConfirmClear(true);setTimeout(()=>setConfirmClear(false),3000)}else{setElements([]);setConfirmClear(false);}}} className={`p-2 rounded-full font-bold text-xs transition-colors ${confirmClear?'bg-red-500 text-white px-3':'text-red-500 hover:bg-red-50'}`}>{confirmClear ? '¿?' : I.Trash}</button> </div> <button onClick={save} className="ml-2 bg-zinc-900 text-white px-4 py-2 rounded-full text-sm font-bold flex gap-2 items-center hover:bg-black transition-colors flex-shrink-0">{I.Save} <span className="hidden md:inline">Guardar</span></button> </div> <canvas ref={canvasRef} onMouseDown={handleDown} onMouseMove={handleMove} onMouseUp={handleUp} onMouseLeave={handleUp} onTouchStart={handleDown} onTouchMove={handleMove} onTouchEnd={handleUp} className="absolute inset-0 w-full h-full z-20" /> {action==='writing' && writingPos && ( <div className="fixed z-[100] fade-in" style={{ left: writingPos.x + panOffset.x + (containerRef.current?.getBoundingClientRect().left||0), top: writingPos.y + panOffset.y, }}> <textarea ref={textAreaRef} autoFocus onBlur={finishWriting} onKeyDown={e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();finishWriting()}}} className="bg-white border-2 border-orange-500 rounded-lg p-3 shadow-2xl outline-none text-slate-900 placeholder-slate-400 overflow-hidden resize-none" style={{ font: `${Math.max(12, strokeWidth * 4)}px sans-serif`, minWidth: '200px', minHeight: '60px' }} placeholder="Escribe..." /> </div> )} </div> ); }

        // --- ACTUALIZACIÓN INTELIGENTE: ESCUCHAR BOTONES EXTERNOS ---
        function App() { 
            const [tab, setTab] = useState('board'); 
            const close = () => window.toggleDrawer(); 
            
            useEffect(() => { 
                // 1. Escuchar teclas (H)
                const handler = (e) => { 
                    if(e.key.toLowerCase()==='h' && !['INPUT','TEXTAREA'].includes(e.target.tagName)) close(); 
                }; 
                window.addEventListener('keydown', handler);

                // 2. Escuchar evento personalizado 'open-tool' desde el HTML
                const toolHandler = (e) => {
                    const toolName = e.detail; // 'board' o 'vocab'
                    setTab(toolName); // Cambiar pestaña
                    // Si el drawer está cerrado, abrirlo
                    const drawer = document.getElementById('tucaneo-drawer');
                    if(drawer && !drawer.classList.contains('is-open')) {
                        drawer.classList.add('is-open');
                    }
                };
                window.addEventListener('open-tool', toolHandler);

                return () => {
                    window.removeEventListener('keydown', handler);
                    window.removeEventListener('open-tool', toolHandler);
                };
            }, []); 
            
            return ( 
                <div className="h-full flex flex-col bg-slate-50"> 
                    <div className="bg-white border-b h-14 shrink-0 flex items-center px-4 gap-6"> 
                        <button onClick={()=>setTab('board')} className={`h-full flex items-center gap-2 border-b-2 font-bold px-2 transition-colors ${tab==='board'?'border-orange-500 text-orange-600':'border-transparent text-gray-400'}`}>{I.Art} Pizarra</button> 
                        <button onClick={()=>setTab('vocab')} className={`h-full flex items-center gap-2 border-b-2 font-bold px-2 transition-colors ${tab==='vocab'?'border-orange-500 text-orange-600':'border-transparent text-gray-400'}`}>{I.Book} Vocabulario</button> 
                        <div className="flex-1"></div> 
                    </div> 
                    <div className="flex-1 relative overflow-hidden"> 
                        <div className={`absolute inset-0 ${tab==='board'?'z-10':'-z-10 opacity-0 pointer-events-none'}`}><WhiteboardModule/></div> 
                        <div className={`absolute inset-0 ${tab==='vocab'?'z-10':'-z-10 opacity-0 pointer-events-none'}`}><VocabModule/></div> 
                    </div> 
                </div> 
            ); 
        }
        const root = ReactDOM.createRoot(document.getElementById('tools-root')); 
        root.render(<App />);
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    
    <script>
        // 1. DETECCIÓN DE ENTORNO
        const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        const isSmallScreen = window.innerWidth < 1024;
        const isMobile = isTouch || isSmallScreen;

        // 2. INICIALIZACIÓN
        if (isMobile) {
            console.log("Modo Móvil detectado: Reveal.js DESACTIVADO.");
            document.body.classList.add('is-mobile');
            window.addEventListener('scroll', () => {
                const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
                const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrolled = (winScroll / height) * 100;
                document.getElementById('scroll-progress').style.width = scrolled + '%';
                const btn = document.getElementById('back-to-top');
                if(btn) (winScroll > 300) ? btn.classList.add('visible') : btn.classList.remove('visible');
            });
        } else {
            console.log("Modo PC detectado: Reveal.js ACTIVADO.");
            Reveal.initialize({
                controls: true, progress: true, center: true, hash: false,
                width: 1200, height: 900, margin: 0.04, minScale: 0.1, maxScale: 3.0,
                transition: 'slide', backgroundTransition: 'fade', plugins: [] 
            });
        }

        // 3. FUNCIONES UI
        function toggleDrawer() { document.getElementById('tucaneo-drawer').classList.toggle('is-open'); }
        
        // --- NUEVA FUNCIÓN: ABRIR HERRAMIENTA ESPECÍFICA ---
        // Despacha un evento que React escucha para cambiar de pestaña y abrir el drawer
        function openTool(toolName) {
            window.dispatchEvent(new CustomEvent('open-tool', { detail: toolName }));
        }

        function forceZoom() {
            if (isMobile) return; 
            
            const container = document.querySelector('.reveal');
            const btn = document.getElementById('btn-zoom');
            
            container.classList.toggle('is-zoomed');

            if (container.classList.contains('is-zoomed')) {
                container.style.transform = 'scale(1.25)'; 
                container.style.transformOrigin = 'center top'; 
                btn.classList.add('active');
                
                const section = document.querySelector('.reveal section.present');
                if(section) section.scrollTop = 0;
                
            } else {
                container.style.transform = '';
                btn.classList.remove('active');
                Reveal.layout(); 
            }
        }

        // 4. LÓGICA DE REACCIONES
        const sounds = {
            confetti: new Audio('https://cdn.pixabay.com/download/audio/2022/03/15/audio_c76303d74b.mp3?filename=party-popper-6822.mp3'),
            applause: new Audio('https://cdn.pixabay.com/download/audio/2021/08/04/audio_0625c1533c.mp3?filename=crowd-cheering-143103.mp3'),
            error: new Audio('https://cdn.pixabay.com/download/audio/2021/08/04/audio_c6ccf3232f.mp3?filename=negative-beeps-6008.mp3') 
        };

        function playSound(name) {
            if(sounds[name]) {
                sounds[name].currentTime = 0; 
                sounds[name].volume = 0.4; 
                sounds[name].play().catch(e => console.log("Audio bloqueado"));
            }
        }

        function react(type) {
            playSound(type);
            switch(type) {
                case 'confetti':
                    var duration = 2000; var end = Date.now() + duration;
                    (function frame() {
                        confetti({ particleCount: 4, angle: 60, spread: 55, origin: { x: 0 }, zIndex: 8000 });
                        confetti({ particleCount: 4, angle: 120, spread: 55, origin: { x: 1 }, zIndex: 8000 });
                        if (Date.now() < end) requestAnimationFrame(frame);
                    }());
                    break;
                case 'applause':
                    confetti({ shapes: ['emoji'], emoji: ['👏', '🙌'], scalar: 4, spread: 100, particleCount: 40, origin: { y: 1 }, zIndex: 8000, startVelocity: 45 });
                    break;
                case 'error': 
                    break; 
            }
        }
    </script>

  <script>
    fetch('/nav.html').then(function(r){ return r.text(); }).then(function(data){
      var el = document.getElementById('header-container');
      if (el) {
      el.innerHTML = data;
      var scripts = el.querySelectorAll('script');
      for (var i = 0; i < scripts.length; i++) {
        var sc = scripts[i];
        var ns = document.createElement('script');
        if (sc.src) ns.src = sc.src; else ns.textContent = sc.textContent;
        document.body.appendChild(ns);
      }
    }
    });
  </script>

</body>
</html>